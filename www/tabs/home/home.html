<!-- Header Bar -->
<ion-header-bar align-title="center" class="bar-positive">
  <div class="buttons">
    <button class="button button-icon icon ion-arrow-left-b" ng-click="doSomething()"></button>
  </div>
  <h1 class="title">home</h1>
</ion-header-bar>

<ion-view title="Home">

  <ion-content class="padding">
<div class="backgroundgrey">
    <!-- Search bar -->
    <div class="list">
      <div class="item item-input-inset">
      <label class="item-input-wrapper">
        <i class="icon ion-ios7-search-strong placeholder-icon"></i>
        <input type="text" placeholder="Search your Feed" ng-model="search.query">
      </label>
        <button class="button button-small" type="submit" ng-click="searchFeed()">Submit</button>
        <button class="button button-clear" ng-if="search.query" ng-click="clearSearch()">x</button>
      </div>
    </div>

    <div ng-repeat="footprint in footprints" class="list card">

      <div class="item item-avatar">

        <!-- Profile Picture -->
        <div class="profpicframe">
          <div class="profpic">
            <img ng-click='loadProfilePage(footprint.user)' ng-src='{{footprint.user.fbProfilePicture}}'>
          </div>
        </div>
        <!-- Badge -->
        <img src="https://s3-us-west-2.amazonaws.com/waddle/Badges/Burger1.png" class="waddlebadge">
        <!-- User Name -->
        <a href="#" class="subdued">{{footprint.user.name}}</a>
        <br>
        <!-- Place Name -->
        <a ng-click="getFootprint(footprint)">
          <h2>{{footprint.place.name}}</h2>

        <!-- Check-in Time -->
        <p>{{footprint.checkin.checkinTime | date : shortDate}}</p>
      </div>

      <div class="item item-body">
        <div class="checkinphoto">
          <img ng-if="footprint.checkin.photoLarge !== 'null'" ng-click="getFootprint(footprint)" class="full-image" ng-src="{{footprint.checkin.photoLarge}}">
        </div>
        <a ng-if="footprint.comments.length > 0" ui-sref="tab.comments" ng-click="openFootprint(footprint)" class="subdued">{{ footprint.comments.length }} Comments</a>
          <a ng-if="footprint.hypes.length > 0"  ui-sref="tab.hypers" ng-click="openFootprint(footprint)" class="subdued">{{ footprint.hypes.length }} Hypes</a>
          </p>
        <p ng-if="footprint.checkin.caption !== 'null'">{{footprint.checkin.caption}}</p>

        <!-- <p>
          <a ng-if="footprint.comments.length > 0" ui-sref="tab.comments" ng-click="openFootprint(footprint)" class="subdued">{{ footprint.comments.length }} Comments</a>
          <a ng-if="footprint.hypes.length > 0"  ui-sref="tab.hypers" ng-click="openFootprint(footprint)" class="subdued">{{ footprint.hypes.length }} Hypes</a>
        </p> -->
      </div>

      <!-- Comments -->
      <div ng-repeat="comment in footprint.comments | orderBy:'comment.time' | limitTo:3" class="item item-avatar item-text-wrap" ui-sref="tab.comments" ng-click="openFootprint(footprint)">  
        <div class="profpicframe">
          <img ng-src='{{comment.commenter.fbProfilePicture}}' class="profpic">
        </div>
        <h2>{{comment.commenter.name}}</h2>
        <p>{{comment.comment.text}}</p>
        <p>{{comment.comment.time | date : shortDate}}<P>
      </div>

      <!-- Hype and Comment Buttons -->
      <div class="item item-divider tabs tabs-secondary tabs-icon-left">
        <a ng-if="!footprint.bucketed" class="tab-item" ng-click="addCheckinToBucketList({{ footprint }}, {{ $index }})">
          <i class="icon ion-arrow-up-a"></i>
          <span>Hype</span>
        </a>
        <a ng-if="footprint.bucketed" class="tab-item" ng-click="removeCheckinFromBucketList(footprint)">
          <i class="icon ion-arrow-up-a positive"></i>
          <span>Hyped!</span>
        </a>
        <a class="tab-item" ui-sref="tab.comments" ng-click="openFootprint(footprint)">
          <i class="icon ion-chatbox"></i>
          <span>Comment</span>
        </a>
      </div>

    </div>

          <!-- Hype Button -->
<!--           <button class="button button-small" ng-click="addCheckinToBucketList({{ footprint }})">
            <i class="icon ion-arrow-up-a"></i>
          </button> -->
      <!-- </div> -->
      <!-- <div class="item item-body"> -->
        <!-- Photo & Caption -->
<!--         <img ng-if="footprint.checkin.photoLarge !== 'null'" ng-click="getFootprint(footprint)" class="full-image" ng-src="{{footprint.checkin.photoLarge}}">
        <p ng-if="footprint.checkin.caption !== 'null'">{{footprint.checkin.caption}}</p> -->

        <!-- Default Photo (if no photo) -->
      <!--   <div ng-if="footprint.checkin.photoLarge === 'null'" ng-if="footprint.checkin.caption === 'null'" class='captioncontainer'> -->
          <!-- <img class="full-image defaultpeng" ng-click="getFootprint(footprint)" ng-src="https://s3-us-west-2.amazonaws.com/waddle/WaddlePenguinLogo.png"/> -->
<!--         <div ng-if="footprint.checkin.photoLarge === 'null'" ng-if="footprint.checkin.caption === 'null'" class='captioncontainer'>
          <img class="full-image defaultpeng" ng-click="getFootprint(footprint)" ng-src="https://s3-us-west-2.amazonaws.com/waddle/WaddlePenguinLogo.png"/>
>>>>>>> c73447baf927dce97f157102a5d5e333e27db6fd
          <h4 ng-if="footprint.checkin.caption !== 'null' && footprint.checkin.photoLarge === 'null'">"{{footprint.checkin.caption}}"</h4>
        </div> -->

      <!-- List of hypers -->
<!--       <div ng-if="footprint.hypes.length > 0" class="item item-divider">
        <div class="row">
          <i class="icon ion-arrow-up-a"></i>
          <p ng-repeat="hyper in footprint.hypes">{{ hyper.name }}</p>
        </div>
      </div> -->

      <!-- Comments -->
<!--       <div ng-repeat="comment in footprint.comments | orderBy:'comment.time'" class="item item-avatar">  
        <img ng-src='{{comment.commenter.fbProfilePicture}}'>
        <h2>{{comment.commenter.name}}</h2>
        <p>{{comment.comment.text}}</p>
        <p>{{comment.comment.time | date : shortDate}}<P>
      </div> -->

      <!-- Add Comment -->
<!--       <form name="customSubmit" data-custom-submit info='someinfo' class='comment_form' novalidate>
        <input ng-model='comment' name='comment' placeholder='Leave a comment' data-ng-minlength="1" data-ng-maxlength="120" required>
        <span class="help-inline" ng-show="customSubmit.comment.$error.maxlength">120 Character Max</span>
      </form> -->

    <!-- Not bucketed -->
    <!-- <img ng-if="!footprint.checkin.bucketed" class='addbucket feedactions' title="Add to Bucket List" ng-click="addCheckinToBucketList(footprint)"/> -->
    <!-- Bucketed -->
    <!-- <img ng-if="footprint.checkin.bucketed" class='addbucketactive feedactions' title="Add to Bucket List" ng-click="removeCheckinFromBucketList(footprint)"/> -->

  <!-- </div> -->
</div>
  <ion-infinite-scroll
    on-infinite="getAggregatedFeedData()"
    ng-if="moreDataCanBeLoaded"
    distance="10%">
  </ion-infinite-scroll>

  </ion-content>
</ion-view>